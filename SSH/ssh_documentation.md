# SSH (Secure Shell - защищенная оболочка)

— сетевой протокол прикладного уровня, предназначеный для безопасного удаленного доступа к UNIX-системам. Данный протокол эффективен тем, что шифрует всю передаваемую информацию по сети. По умолчанию, используется 22-й порт. В основном он нужен для удаленного управления данными пользователя на сервере, запуска служебных команд, работы в консольном режиме с базами данных. 

SSH допускает выбор различных алгоритмов шифрования. SSH-клиенты и SSH-серверы доступны для большинства сетевых операционных систем.

## Преимущества

* Безопасная работа на удаленном сервере с использованием командной оболочки;

* Использование разных алгоритмов шифрования (симметричного, асимметричного и хеширования);

* Возможность безопасного использования любого сетевого протокола, что позволяет передавать по защищенному каналу файлы любого размера.

Главным преимуществом SSH является использование шифрования для защиты передачи данных между хостом и клиентом. **Хост** — это удаленный сервер к которому ты хочешь получить доступ, тогда как **клиент** — это компьютер с которого ты пытаешься получить доступ к хосту.

## Недостатки

Протокол SSH не имеет средств защиты от действий злоумышленника, получившего root-доступ. Одной из мер предосторожности является ограничение использования режима root без острой необходимости

## Технологии шифрования

### Симметричное шифрование

Это форма шифрования, где секретный ключ используется для шифрования и дешифровки сообщения как клиентом, так и хостом. Стоит отметить, что любой клиент имеющий ключ, может дешифровать передаваемое сообщение.

![](https://hsto.org/r/w1560/getpro/habr/upload_files/4ef/99d/f3b/4ef99df3bb139fccfef872902958b959.jpg)

### Асимметричное шифрование

Использует два отдельных ключа для шифрования и дешифровки. Эти два ключа также известны как приватный и публичный ключи. Вместе они формируют пару публичных-приватных ключей.

![](https://hsto.org/r/w1560/getpro/habr/upload_files/a10/ca4/124/a10ca4124f560f6e0725f25f1632c66e.jpg)

### Хеширование

**Одностороннее хеширование** — это еще одна форма криптографии, которая используется в SSH. Такого рода хеширование отличается от двух упомянутых выше тем, что оно не предназначено для дешифровки. Оно создает уникальное значение фиксированной длины для каждого ввода, которое не показывает никакого общего поведения для его раскрытия. Это делает его практически невозможным для обратного преобразования.

![](https://hsto.org/r/w1560/getpro/habr/upload_files/f05/bb1/bcd/f05bb1bcde55cb42868fcb8f4c7c1f38.jpg)

## Советы по безопасности использования SSH

* Запрет на удалённый root-доступ;
* Запрет подключения с пустым паролем или отключение входа по паролю;
* Выбор нестандартного порта для SSH-сервера;
* Использование длинных SSH2 RSA-ключей (2048 бит и более). Системы шифрования на основе RSA считаются надёжными, если длина ключа не менее 1024 бит (см. connecting_to_github_with_SSH.md);
* Ограничение списка IP-адресов, с которых разрешён доступ (например, настройкой файервола);
* Запрет доступа с некоторых потенциально опасных адресов;
* Отказ от использования распространённых или широко известных системных логинов для доступа по SSH;
* Регулярный просмотр сообщений об ошибках аутентификации;
* Установка систем обнаружения вторжений (IDS);
* Использование ловушек, подделывающих SSH-сервис (honeypot).

### Базовые SSH команды

(это просто базовые команды терминала)

* ```ls``` — Показать содержимое каталога (список названий файлов).<br>
* ```cd``` — Сменить каталог (перейти в другой).<br>
* ```mkdir``` — Создать новую папку (каталог).<br>
* ```touch``` — Создать новый файл.<br>
* ```rm``` — Удалить файл.<br>
* ```cat``` — Показать содержимое файла.<br>
* ```pwd``` — Показать текущий каталог (полный путь к этому каталогу).<br>
* ```cp``` — Копировать файл/папку.<br>
* ```mv``` — Переместить файл/папку.<br>
* ```grep``` — Поиск конкретной фразы в файле.<br>
* ```find``` — Поиск файлов и папок.<br>
* ```vi \ nano``` — Текстовые редакторы.<br>
* ```history``` — Показать 50 последних использованных команд.<br>
* ```clear``` — Очистить окно терминала.<br>

### Подключение к удалённому серверу SSH

В следующем примере используются обычные параметры, часто встречающиеся при подключении к удалённому серверу SSH.

```
$ ssh -v -p 22 -C neo@remoteserver
```

```-v``` - вывод отладочной информации особенно полезен при анализе проблем аутентификации. Можно использовать несколько раз для вывода дополнительной информации.<br>
```-p 22``` - порт для подключения к удалённому серверу SSH. 22 не обязательно указывать, потому что это значение по умолчанию, но если протокол на каком-то другом порту, то указываем его с помощью параметра -p. Порт прослушивания указывается в файле sshd_config в формате Port 2222.<br>
```-C``` - сжатие для соединения. Если у вас медленный канал или вы просматриваете много текста, это может ускорить связь.<br>
```neo@``` - строка перед символом @ обозначает имя пользователя для аутентификации на удалённом сервере. Если не указать его, то по умолчанию будет использоваться имя пользователя учётной записи, в которую вы вошли в данный момент (~$ whoami). Пользователя также можно указать параметром ```-l```.<br>
```remoteserver``` - имя хоста, к которому подключается ssh, это может быть полное доменное имя, IP-адрес или любой хост в локальном файле hosts. Для подключения к хосту, который поддерживает и IPv4, и IPv6, можно добавить в командную строку параметр -4 или -6 для правильного резолвинга.

Все вышеперечисленные параметры являются необязательными, кроме ```remoteserver```.

### Удалённое выполнение команд

Команду ssh можно связать с другими командам для обычного удобного интерфейса. Просто добавьте команду, которую хотите запустить на удалённом хосте, в качестве последнего параметра в кавычках.

```
$ ssh remoteserver "cat /var/log/nginx/access.log" | grep badstuff.php
```

В данном примере ```grep``` выполняется на локальной системе после того, как лог скачался по ssh-каналу. Если файл большой, удобнее запустить ```grep``` на удалённой стороне, просто заключив обе команды в двойные кавычки.

### Дополнительная информация:
[Статья на habr](https://habr.com/ru/company/ruvds/blog/676596/)
[Перевод статьи на habr](https://habr.com/ru/post/435546/)
[learn.microsoft. Windows 10. Подключение с помощью SSH](https://learn.microsoft.com/ru-ru/windows-hardware/manufacture/desktop/factoryos/connect-using-ssh?view=windows-10)