# Коннект с GitHub через SSH

**Зачем?** Используя протокол SSH, можно подключаться и аутентифицироваться на удаленных серверах и службах. Можно подключаться к GitHub, не указывая свое имя пользователя и личный токен доступа при каждом посещении. Можно также использовать ключ SSH для подписи коммитов.

[**Видео** - Hастройка логина в GitHub через SSH Key на Linux](https://www.youtube.com/watch?v=OwWZ5JgJneQ&list=PLg5SS_4L6LYstwxTEOU05E0URTHnbtA0l&index=10)

[**Видео** - Hастройка логина в GitHub через SSH Key на Windows](https://www.youtube.com/watch?v=4evR80g--9k&list=PLg5SS_4L6LYstwxTEOU05E0URTHnbtA0l&index=10)

[**doc.github.com** Connecting to GitHub with SSH](https://docs.github.com/en/authentication/connecting-to-github-with-ssh). Про SSH Agent можно почитать [тут](https://habr.com/ru/company/skillfactory/blog/503466/).

[**git-cm.com** Генерация открытого SSH ключа](https://git-scm.com/book/ru/v2/Git-на-сервере-Генерация-открытого-SSH-ключа)


### Или короче говоря:

1. Установить Git Bash и открыть (Windows OS).
   
2. Сгенерировать ssh ключ:
    ```
    $ ssh-keygen
    ```

    Сначала программа попросит указать расположение файла для сохранения ключа (.ssh/id_rsa), затем дважды ввести пароль для шифрования. Если вы не хотите вводить пароль каждый раз при использовании ключа, то можете оставить его пустым (нажмите Enter, это принимает расположение файла по умолчанию в .shh каталоге) или использовать программу ssh-agent. Если вы решили использовать пароль для приватного ключа, то настоятельно рекомендуется использовать опцию -o, которая позволяет сохранить ключ в формате, более устойчивом ко взлому методом подбора, чем стандартный формат.<br>
    ```ssh-keygen```— это инструмент для создания новых пар ключей аутентификации для SSH. Такие пары ключей используются для автоматизации входа в систему, единого входа и аутентификации хостов.

3. Скопировать публичный ключ:

    ```
    $ cat ~/.ssh/id_rsa.pub
    ```

4. Зайти в [настройки аккаунта/SSH and GPG keys](https://github.com/settings/keys).
   
5. Кнопка New SSH key.
   
6. Назвать его и вставить в поле ключа скопированный текст.
   
7. Теперь можно подключаться к репозиторию по SSH ссылке этого репозитория.

Для обеспечения безопасности учетной записи вы можете регулярно просматривать список ключей SSH и отзывать любые недействительные или ненужные ключи. [docs.github](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/reviewing-your-ssh-keys)

## Выбор алгоритма и размера ключа

SSH поддерживает несколько алгоритмов для ключей аутентификации:

```rsa```— старый алгоритм, основанный на сложности факторизации больших чисел. Для RSA рекомендуется размер ключа не менее 2048 бит; 4096 бит лучше. RSA устаревает, а в факторинге делаются значительные успехи. Может быть целесообразным выбор другого алгоритма. Вполне возможно, что в обозримом будущем алгоритм RSA станет практически взломанным. Все клиенты SSH поддерживают этот алгоритм.

```dsa```- старый алгоритм цифровой подписи правительства США. Он основан на сложности вычисления дискретных логарифмов. Обычно с ним используется размер ключа 1024. DSA в его исходной форме больше не рекомендуется.

```ecdsa```- новый алгоритм цифровой подписи, стандартизированный правительством США, с использованием эллиптических кривых. Вероятно, это хороший алгоритм для текущих приложений. Поддерживаются только три размера ключа: 256, 384 и 521 (sic!) бит. Рекомендуется всегда использовать его с 521 битом, так как ключи все еще маленькие и, вероятно, более безопасные, чем ключи меньшего размера (хотя они также должны быть безопасными). Большинство клиентов SSH теперь поддерживают этот алгоритм.

```ed25519```- это новый алгоритм, добавленный в OpenSSH. Поддержка его в клиентах пока не универсальна. Таким образом, его использование в приложениях общего назначения может быть пока нецелесообразным.<br>
**Примечание**: этот алгоритм используется в генерации ключа в [гайде гита](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent).

Алгоритм выбирается с помощью ```-t```.<br>
```-b``` - указывает количество битов в ключе. Правила, регулирующие вариант использования SSH, могут требовать использования ключа определенной длины. Как правило, 2048 бит считается достаточным для ключей RSA.<br>
Пример команд:

```
$ ssh-keygen -t rsa -b 4096
$ ssh-keygen -t dsa 
$ ssh-keygen -t ecdsa -b 521
$ ssh-keygen -t ed25519
```

**Указание имени файла:**

Обычно инструмент запрашивает файл, в котором нужно сохранить ключ. Однако его также можно указать в командной строке с помощью ```-f``` параметра.

```
$ ssh-keygen -f ~/tatu-key-ecdsa -t ecdsa -b 521
```